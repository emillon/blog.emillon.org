<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Enter the void * - Parsing Brogue seed data with Parsec</title>
        <link rel="stylesheet" type="text/css" href="../css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="../css/extra.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
        <link rel="alternate" type="application/rss+xml" title="Enter the void *" href="../rss.xml" />
        <link rel="shortcut icon" href="../favicon.ico" />
        <link href="http://fonts.googleapis.com/css?family=Merriweather:400,300" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="header container">
            <h1 class="maintitle">Enter the void *</h1>
               <div class="nav-hdr">
                   <ul>
                      <li><a href="../">Home</a></li>
                      <li><a href="../posts.html">All posts</a></li>
                      <li><a href="../rss.xml">Feed</a></li>
                      <li><a href="https://github.com/emillon">Github</a></li>
                      <li><a href="https://qa.debian.org/developer.php?login=me%40emillon.org">Debian</a></li>
                      <li><a href="https://twitter.com/etiennemillon">Twitter</a></li>
                   </ul>
                </div>
        </div>
        <div class="maincontainer container">
          <div class="col-md-8 col-md-offset-2">
            <h1>Parsing Brogue seed data with Parsec</h1>

<p>by <em>Etienne Millon</em> on <strong>No date</strong></p>

<p>Tagged as: .</p>

<h3 id="gaming">Gaming</h3>
<p>When I was younger, I enjoyed a lot japanese RPGs on the SNES. Stories
were nice, combat systems were nice, these games were AA.</p>
<p>But now, don’t enjoy too much stuff with too much theme in it. For
example, I prefer games like <a href="http://boardgamegeek.com/boardgame/3076/puerto-rico">Puerto Rico</a> to
<a href="http://boardgamegeek.com/boardgame/25821/werewolves-millers-hollow">The Werewolves of Miller’s Hollow</a>. Of course, it’s a
very different kind of game but what I like about Puerto Rico is that
like many European games, the theme is completely optional. It could
take place in Alaska, the Balkans, or ancient China and still be the
same game. What’s important is that you</p>
<h3 id="roguelikes-brogue">Roguelikes &amp; Brogue</h3>
<p>Roguelikes are a type of game which are a descendant of the venerable
<a href="http://en.wikipedia.org/wiki/Rogue_(video_game)">Rogue</a>. The most notorious is probably <a href="http://www.nethack.org/">NetHack</a>. <a href="https://sites.google.com/site/broguegame/">Brogue</a>, which I’ll
talk about here, is a more modern roguelike, which is certainly easier for
beginners. It looks like… that:</p>
<figure>
<img src="brogue/brogueanim.gif" alt="BrogueAnim" />
<figcaption aria-hidden="true">BrogueAnim</figcaption>
</figure>
<p>As it’s quite abstract, this screenshot can be read as this:</p>
<ul>
<li><code>@</code> is the player. You control its position using the hjkl keys to move it
like in vi, and using yubn to move it diagonals.</li>
<li><code>#</code> are walls.</li>
<li><code>.</code> is an empty spot (you can walk over it).</li>
<li><code>"</code> is grass. It’s like an empty spot, except that it can burn.</li>
<li><code>~</code> is water. As you can see, it’s animated and beautiful (sort of).</li>
<li><code>r</code> is a rat. There are a lot of different enemies in Brogue, with different
characteristics. Rats are the weakest type, and are usually defeated in a
hit.</li>
<li><code>Ω</code> is the dungeon’s exit. The goal of the game is to exit the dungeon,
which is challenging because to unlock the exit door, you have to be in
possession of the Amulet of Yendor which is on level 26. That is to say, you
have to make your way through 26 levels full of enemies down and back up
(the ascension is quite easy, though).</li>
</ul>
<h3 id="seeds-builds">Seeds &amp; builds</h3>
<p>In Brogue, you can’t do much besides taking items, fighting monsters, and
exploring the dungeon. Much of your actions are based on the items you will
find, and they are randomly spawned.</p>
<p>The random system is quite ingenious. The world is statically generated by a RNG
and is entirely determined by a seed. For example, when you start a game, it’s
seeded with the current time. During the gameplay, everything is deterministic
with respect to this seed.</p>
<p>It makes it possible to do a very simple for saved games. You just have to store
the seed and the sequence of inputs, and replay them at load time. This means
that short games are very fast to load, but end-game saves are a bit long
(~1 min).</p>
<p>During a game, you have to use what you find to survive. But some items can work
together to create a good “build”.</p>
<p>For example, I was interested in trying <em>the jellymaster build</em>. It relies on a
type of enemy, the Pink Jelly, which duplicates itself when hit (although with
half health). Such an enemy could become a powerful ally, because it’s a source
of unlimited allies!</p>
<p>To put this strategy in action, two items are needed:</p>
<ul>
<li>a <em>wand of domination</em>, which converts an enemy to an ally.</li>
<li>a <em>staff of healing</em>, with which you can heal allies.</li>
</ul>
<p>Then, the strategy is to find a pink jelly (they are common enemies), dominate
it with the wand, and heal one of the parts once in a while when it is hit.</p>
<p>The goal of this article is to write a tool to find seeds that have both a wand
of domination and a staff of healing accessible in the first few levels.</p>
<h3 id="input-file">Input file</h3>
<p>Our work is greatly reduced because Brogue comes with a seed catalog, a text
file which associates seed numbers with a list of items (and the level at which
each can be found). This catalaog has been created with a modified version of
Brogue. We could modify it to allow for filtering, but postprocessing is just as
fun (and presumably more efficient).</p>
<p>The source file looks like a sequence of sections like:</p>
<pre><code>Seed 5:
    Depth 1:
        A scroll of remove curse
        A scroll of shattering
        A potion of descent
        A scroll of aggravate monsters
        A +2 protection charm (ready)
        A scroll of enchanting
        A potion of darkness
    Depth 2:
        121 gold pieces
        A potion of levitation
        A potion of strength
        A potion of detect magic
        A potion of creeping death
        A potion of life
        A potion of strength
        A +2 ring of clairvoyance (vault 1)
        A +1 invisibility charm (ready) (vault 1)
        A +1 ring of stealth (vault 1)
        +3 leather armor of multiplicity [6]&lt;10&gt; (vault 1)
        +1 banded mail of absorption [8]&lt;15&gt; (vault 1)
        A wand of negation [6] (vault 1)
        A wand of empowerment [1] (vault 1)
        A door key (vault 3)
    Depth 3:
        116 gold pieces
        128 gold pieces
        A +0 axe &lt;15&gt;
        A scroll of enchanting
        A +2 ring of regeneration
        A potion of confusion
        Some food
    Depth 4:
        149 gold pieces
        127 gold pieces
        146 gold pieces
        A potion of hallucination
        A potion of paralysis
        A potion of incineration
        A scroll of teleportation
        A +1 ring of transference (vault 3)
        A +2 ring of transference (vault 3)
        A +1 ring of transference (vault 3)
        A door key (vault 5)
        A staff of obstruction [2/2] (vault 1)
        A staff of lightning [3/3] (vault 1)
        A staff of obstruction [3/3] (vault 1)
        A staff of lightning [2/2] (vault 1)
        A staff of haste [2/2] (vault 1)
    Depth 5:
        117 gold pieces
        150 gold pieces
        A scroll of protect weapon
        A potion of incineration
        A potion of paralysis
        A +0 dagger &lt;10&gt;
        A scroll of identify</code></pre>



          </div>
        </div>
        <div class="footer container">
            <p>
                I love feedback! Feel free to catch me on twitter
                (<a href="https://twitter.com/etiennemillon">@etiennemillon</a>)
                or drop me mail (me AT emillon DOT org).
            </p>
        </div>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-51676253-1', 'emillon.org');
          ga('send', 'pageview');

        </script>
    </body>
</html>
